<!DOCTYPE html>
<html>
    <head>
        <title>Title</title>
        <meta charset="utf-8" />
        <meta name="description" content="Description" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- vendor style-->
        <link rel="stylesheet" href="./vendor/font-awesome-4.7.0/css/font-awesome.min.css" />
        <link rel="stylesheet" href="./vendor/swiper/css/swiper.min.css" />
        <link rel="stylesheet" href="./vendor/bootstrap-datepicker/css/bootstrap-datepicker.min.css" />
        <link rel="stylesheet" href="./vendor/bootstrap-datepicker/css/bootstrap-datepicker.standalone.min.css" />
        <link rel="stylesheet" href="./vendor/clockpicker/css/bootstrap-clockpicker.min.css" />
        <link rel="stylesheet" href="./vendor/simplebar/css/simplebar.min.css" />
        <!-- custom style-->
        <link rel="stylesheet" href="./css/style.css" />
        <!--[if IE]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
    </head>
    <body>
        <!-- header-->
        <header class="header">
            <div class="navbar navbar-expand-lg"><a class="header__logo" href="./"><img src="./images/logo.png" alt="" /></a>
                <div class="navbar-collapse collapse">
                    <!-- left menu-->
                    <ul class="navbar-nav menu">
                        <li class="nav-item"><a class="nav-link active text-roboto" href="#!">HOME</a></li>
                        <li class="nav-item"><a class="nav-link" href="#!">私たちに関しては</a></li>
                        <li class="nav-item"><a class="nav-link" href="./booking.html">サービス</a></li>
                    </ul>
                    <!-- right menu-->
                    <ul class="navbar-nav menu-2">
                        <li class="nav-item dropdown h-lang"><a class="nav-link dropdown-toggle" href="#!" data-toggle="dropdown">JAPANESE</a>
                            <div class="dropdown-menu"><a class="dropdown-item" href="#!">ENGLISH</a></div>
                        </li>
                        <li class="nav-item"><a class="nav-link" href="#!">お問い合わせ</a></li>
                        <li class="nav-item"><a class="nav-link" href="#!"><i class="fa fa-user fa-fw"></i><span>ログイン</span></a></li>
                        <li class="nav-item h-special"><a class="nav-link" href="#!"><i class="fa fa-building-o fa-fw"></i><span>会社の方へ</span></a></li>
                    </ul>
                </div>
            </div>
        </header>
        <!-- main content-->
        <section class="banner-2"><img class="banner-2__bg" src="./images/banner-bg.png" alt="" />
            <div class="container">
                <div class="banner-2__inner">
                    <div>
                        <div class="banner-2__title">霊柩車サービス</div><a class="banner-2__back" href="./booking.html"><i class="fa fa-angle-left"></i><span>Back to submit infomations</span></a>
                    </div>
                    <div><a class="banner-2__subtitle" href="#!"><span>ピッキング時間</span><i class="fa fa-pencil-square"></i></a>
                        <div class="banner-2__info"><i class="fa fa-calendar mr-1"></i><span>31, July 2019</span><i class="fa fa-clock-o ml-4 mr-1"></i><span>09:00 AM</span></div>
                    </div>
                </div>
            </div>
            <nav class="navigation">
                <div class="container">
                    <div class="navigation__inner">
                        <div class="audio"><i class="fa fa-info-circle audio__icon"></i>
                            <div class="audio__text">
                                <div>選択するには、アイコンを</div>
                                <div>クリックしてください。</div>
                            </div>
                            <button class="audio__btn js-audio-btn" type="button"><i class="fa fa-volume-up"></i></button><audio preload="auto" controls class="audio__audio js-audio">
                                <source src="./audio/tongue-roll-2.wav">
                            </audio>
                        </div>
                        <ul class="step">
                            <li class="step__item active"><span class="step__number">1</span><span class="step__text">Hearse</span></li>
                            <li class="step__item"><span class="step__number">2</span><span class="step__text">Pick up</span></li>
                            <li class="step__item"><span class="step__number">3</span><span class="step__text">Via</span></li>
                            <li class="step__item"><span class="step__number">4</span><span class="step__text">Resting Place</span></li>
                            <li class="step__item"><span class="step__number">5</span><span class="step__text">Estimation</span></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </section>
        <section>
            <div class="position-relative">
                <div id="map"></div>
                <div class="map-search">
                    <input class="map-search__input" id="autocomplete" type="text" placeholder="場所を探す..." onFocus="geolocate()" />
                    <button class="map-search__btn" type="submit"><i class="fa fa-search"></i></button>
                </div>
            </div>
            <div id="fixedBottom">
                <div class="container">
                    <form class="d-flex py-20 align-items-center justify-content-between" action="./step4.html">
                        <div class="step-info">
                            <div class="step-info__estimate"><span>Estimation Price:</span><span class="step-info__money js-estimate-price">10,305 JPY</span></div>
                        </div>
                        <div class="d-flex">
                            <input id="via-lat" type="hidden" />
                            <input id="via-lng" type="hidden" />
                            <input id="via-distance" type="hidden" />
                            <input id="via-address" type="hidden" />
                            <!-- đơn vị mét (meter)-->
                            <input id="via-distance" type="hidden" /><a class="m-btn-default m-btn-sm mr-20" href="./step2.html">バック</a>
                            <button class="m-btn m-btn-sm text-roboto js-submit-btn" type="submit">Skip & Next</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>
        <div class="marker-container">
            <div class="marker">
                <div class="marker-wrapper">
                    <div class="marker-header"><span class="marker-number"></span><span class="marker-title"></span><a class="marker-info" href="#!"><i class="fa fa-info-circle"></i></a></div>
                    <div class="marker-pointer"><img class="marker-icon" src="" alt="" /><span class="marker-distance"></span></div>
                </div>
            </div>
        </div>
        <article class="md-car modal fade js-modal-car" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="md-car__content modal-content">
                    <button class="md-car__close" type="button" data-dismiss="modal"><i class="fa fa-times"></i></button>
                    <div class="md-banner-slider swiper-container js-md-banner-slider w-100 over-hidden">
                        <div class="md-banner-slider__paging swiper-pagination"></div>
                        <div class="swiper-wrapper">
                            <div class="swiper-slide"><img class="md-banner-slider__img" src="./images/modal-banner.png" alt="" /></div>
                            <div class="swiper-slide"><img class="md-banner-slider__img" src="./images/modal-banner.png" alt="" /></div>
                            <div class="swiper-slide"><img class="md-banner-slider__img" src="./images/modal-banner.png" alt="" /></div>
                        </div>
                    </div>
                    <div></div>
                    <div class="row no-gutters">
                        <div class="md-car__info col-6">
                            <div class="md-car__detail">
                                <p><strong>住所:</strong>
                                    12/341/42. Car Address, Tokyo, Japan
                                </p>
                                <p><strong>Company:</strong><span>Company 1</span></p>
                                <p><strong>距離:</strong>
                                    2.3km
                                </p>
                                <p><strong>Price:</strong></p>
                                <p>First 100km:<strong>10,000 JPY</strong></p>
                                <p>From 100 to 200km:<strong>80 JPY</strong>
                                    / km
                                </p>
                                <p>Over 200km:<strong>60 JPY</strong>
                                    / km
                                </p>
                            </div>
                            <div class="row gutter-16 mt-auto">
                                <div class="col-6">
                                    <button class="md-car__btn-default" type="button" data-dismiss="modal">CLOSE</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <ul class="testimonial-list">
                                <li class="testimonial-list__item">
                                    <div class="testimonial media">
                                        <div class="testimonial__thumb"><img src="./images/guest-avatar.png" alt="" /></div>
                                        <div class="media-body">
                                            <div class="d-flex justify-content-between mb-1">
                                                <div class="testimonial__name">Guest 01</div>
                                                <div class="testimonial__info"><span>24-12-2019</span>
                                                    <div class="testimonial__stars">
                                                        <div class="rating rating-4-5"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="testimonial__text">紀線ワ討娠ふスむれ次新チアコ問求ぎざしッ元42分イノ二速スま目側ルセエ療際ハタ伊辞ランう朝庁漢テソナワ就流ヲトヨ朝黒就ば</div>
                                        </div>
                                    </div>
                                </li>
                                <li class="testimonial-list__item">
                                    <div class="testimonial media">
                                        <div class="testimonial__thumb"><img src="./images/guest-avatar.png" alt="" /></div>
                                        <div class="media-body">
                                            <div class="d-flex justify-content-between mb-1">
                                                <div class="testimonial__name">Guest 01</div>
                                                <div class="testimonial__info"><span>24-12-2019</span>
                                                    <div class="testimonial__stars">
                                                        <div class="rating rating-4-5"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="testimonial__text">紀線ワ討娠ふスむれ次新チアコ問求ぎざしッ元42分イノ二速スま目側ルセエ療際ハタ伊辞ランう朝庁漢テソナワ就流ヲトヨ朝黒就ば</div>
                                        </div>
                                    </div>
                                </li>
                                <li class="testimonial-list__item">
                                    <div class="testimonial media">
                                        <div class="testimonial__thumb"><img src="./images/guest-avatar.png" alt="" /></div>
                                        <div class="media-body">
                                            <div class="d-flex justify-content-between mb-1">
                                                <div class="testimonial__name">Guest 01</div>
                                                <div class="testimonial__info"><span>24-12-2019</span>
                                                    <div class="testimonial__stars">
                                                        <div class="rating rating-4-5"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="testimonial__text">紀線ワ討娠ふスむれ次新チアコ問求ぎざしッ元42分イノ二速スま目側ルセエ療際ハタ伊辞ランう朝庁漢テソナワ就流ヲトヨ朝黒就ば</div>
                                        </div>
                                    </div>
                                </li>
                                <li class="testimonial-list__item">
                                    <div class="testimonial media">
                                        <div class="testimonial__thumb"><img src="./images/guest-avatar.png" alt="" /></div>
                                        <div class="media-body">
                                            <div class="d-flex justify-content-between mb-1">
                                                <div class="testimonial__name">Guest 01</div>
                                                <div class="testimonial__info"><span>24-12-2019</span>
                                                    <div class="testimonial__stars">
                                                        <div class="rating rating-4-5"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="testimonial__text">紀線ワ討娠ふスむれ次新チアコ問求ぎざしッ元42分イノ二速スま目側ルセエ療際ハタ伊辞ランう朝庁漢テソナワ就流ヲトヨ朝黒就ば</div>
                                        </div>
                                    </div>
                                </li>
                                <li class="testimonial-list__item">
                                    <div class="testimonial media">
                                        <div class="testimonial__thumb"><img src="./images/guest-avatar.png" alt="" /></div>
                                        <div class="media-body">
                                            <div class="d-flex justify-content-between mb-1">
                                                <div class="testimonial__name">Guest 01</div>
                                                <div class="testimonial__info"><span>24-12-2019</span>
                                                    <div class="testimonial__stars">
                                                        <div class="rating rating-4-5"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="testimonial__text">紀線ワ討娠ふスむれ次新チアコ問求ぎざしッ元42分イノ二速スま目側ルセエ療際ハタ伊辞ランう朝庁漢テソナワ就流ヲトヨ朝黒就ば</div>
                                        </div>
                                    </div>
                                </li>
                                <li class="testimonial-list__item">
                                    <div class="testimonial media">
                                        <div class="testimonial__thumb"><img src="./images/guest-avatar.png" alt="" /></div>
                                        <div class="media-body">
                                            <div class="d-flex justify-content-between mb-1">
                                                <div class="testimonial__name">Guest 01</div>
                                                <div class="testimonial__info"><span>24-12-2019</span>
                                                    <div class="testimonial__stars">
                                                        <div class="rating rating-4-5"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="testimonial__text">紀線ワ討娠ふスむれ次新チアコ問求ぎざしッ元42分イノ二速スま目側ルセエ療際ハタ伊辞ランう朝庁漢テソナワ就流ヲトヨ朝黒就ば</div>
                                        </div>
                                    </div>
                                </li>
                                <li class="testimonial-list__item">
                                    <div class="testimonial media">
                                        <div class="testimonial__thumb"><img src="./images/guest-avatar.png" alt="" /></div>
                                        <div class="media-body">
                                            <div class="d-flex justify-content-between mb-1">
                                                <div class="testimonial__name">Guest 01</div>
                                                <div class="testimonial__info"><span>24-12-2019</span>
                                                    <div class="testimonial__stars">
                                                        <div class="rating rating-4-5"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="testimonial__text">紀線ワ討娠ふスむれ次新チアコ問求ぎざしッ元42分イノ二速スま目側ルセエ療際ハタ伊辞ランう朝庁漢テソナワ就流ヲトヨ朝黒就ば</div>
                                        </div>
                                    </div>
                                </li>
                                <li class="testimonial-list__item">
                                    <div class="testimonial media">
                                        <div class="testimonial__thumb"><img src="./images/guest-avatar.png" alt="" /></div>
                                        <div class="media-body">
                                            <div class="d-flex justify-content-between mb-1">
                                                <div class="testimonial__name">Guest 01</div>
                                                <div class="testimonial__info"><span>24-12-2019</span>
                                                    <div class="testimonial__stars">
                                                        <div class="rating rating-4-5"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="testimonial__text">紀線ワ討娠ふスむれ次新チアコ問求ぎざしッ元42分イノ二速スま目側ルセエ療際ハタ伊辞ランう朝庁漢テソナワ就流ヲトヨ朝黒就ば</div>
                                        </div>
                                    </div>
                                </li>
                                <li class="testimonial-list__item">
                                    <div class="testimonial media">
                                        <div class="testimonial__thumb"><img src="./images/guest-avatar.png" alt="" /></div>
                                        <div class="media-body">
                                            <div class="d-flex justify-content-between mb-1">
                                                <div class="testimonial__name">Guest 01</div>
                                                <div class="testimonial__info"><span>24-12-2019</span>
                                                    <div class="testimonial__stars">
                                                        <div class="rating rating-4-5"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="testimonial__text">紀線ワ討娠ふスむれ次新チアコ問求ぎざしッ元42分イノ二速スま目側ルセエ療際ハタ伊辞ランう朝庁漢テソナワ就流ヲトヨ朝黒就ば</div>
                                        </div>
                                    </div>
                                </li>
                                <li class="testimonial-list__item">
                                    <div class="testimonial media">
                                        <div class="testimonial__thumb"><img src="./images/guest-avatar.png" alt="" /></div>
                                        <div class="media-body">
                                            <div class="d-flex justify-content-between mb-1">
                                                <div class="testimonial__name">Guest 01</div>
                                                <div class="testimonial__info"><span>24-12-2019</span>
                                                    <div class="testimonial__stars">
                                                        <div class="rating rating-4-5"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="testimonial__text">紀線ワ討娠ふスむれ次新チアコ問求ぎざしッ元42分イノ二速スま目側ルセエ療際ハタ伊辞ランう朝庁漢テソナワ就流ヲトヨ朝黒就ば</div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </article>
        <!-- javascript library-->
        <!-- vendor script-->
        <script src="./vendor/jquery/jquery-3.3.1.min.js"></script>
        <script src="./vendor/popper/popper.min.js"></script>
        <script src="./vendor/bootstrap/js/bootstrap.min.js"></script>
        <script src="./vendor/swiper/js/swiper.min.js"></script>
        <script src="./vendor/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>
        <script src="./vendor/clockpicker/js/bootstrap-clockpicker.min.js"></script>
        <script src="./vendor/moment/moment.min.js"></script>
        <script src="./vendor/simplebar/js/simplebar.min.js"></script>
        <!-- google map API-->
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA-Ar4ub4yBYnqo4UqOUu1MXdH1eDi1TsY&amp;libraries=places&amp;callback=initMap" async defer></script>
        <script src="./js/function.js"></script>
        <script>
            var map,
                autocomplete,
                directionsService,
                Marker,
                boundList = {},
                viaMarker,
                newRoute,
                pickup = {
                    label: "Pick up location",
                    position:
                    {
                        lat: 21.019335,
                        lng: 105.792536
                    }
                },
                hearse = {
                    label: "Car company 1",
                    position:
                    {
                        lat: 21.017210,
                        lng: 105.789674
                    }
                };

            function initMap()
            {
                directionsService = new google.maps.DirectionsService;
                map = new google.maps.Map(document.getElementById('map'),
                {
                    zoom: 15,
                    center: pickup.position,
                    clickableIcons: false,
                });
                Marker = createMarkerClass();
                route(hearse.position, pickup.position, colorList[0], function(distance, bounds)
                {
                    addMarkers(distance);
                    boundList.toPickup = bounds;
                    setBounds();
                });
                map.addListener("click", function(e)
                {
                    document.getElementById("#via-address").value = "";
                    var lat = e.latLng.lat(),
                        lng = e.latLng.lng();
                    addViaLocation(lat, lng);
                    if (newRoute)
                    {
                        destroyRoute(newRoute);
                    }
                    newRoute = route(pickup.position, e.latLng, colorList[1], function(distance, bounds)
                    {
                        document.getElementById("via-distance").value = distance.value;
                        boundList.toVia = bounds;
                        setBounds();
                    });
                    updatePageInfo(e.latLng);
                });
                initAutocomplete();
            }

            function addMarkers(distance)
            {
                createMarker(
                {
                    query: ".marker",
                    position: hearse.position,
                    label: hearse.label,
                    number: 1,
                    icon: "./images/icon-hearse.svg",
                    distance: distance.text,
                    info: function()
                    {
                        $(".md-car").modal("show");
                    }
                });
                createMarker(
                {
                    query: ".marker",
                    position: pickup.position,
                    label: pickup.label,
                    number: 2,
                    icon: "./images/icon-user.svg",
                });
            }

            function updatePageInfo(pos)
            {
                var label = 'Latitude: ' + pos.lat() + ', ' + 'longitude: ' + pos.lng();
                var price = calcPrice();
                $(".js-via-location-label").text(label);
                $('.js-via-location').removeClass("d-none");
                $('.js-estimate-price').text(price);
                $('.js-submit-btn').text('Confirm via location');
            }

            function calcPrice()
            {
                return "50,405 JPY";
            }

            function addViaLocation(lat, lng)
            {
                $("#via-lat").val(lat);
                $("#via-lng").val(lng);
                if (viaMarker)
                {
                    destroyMarker(viaMarker);
                }
                viaMarker = createMarker(
                {
                    query: ".marker",
                    position:
                    {
                        lat: lat,
                        lng: lng
                    },
                    label: "Via location",
                    number: 3,
                    icon: "./images/icon-plus-circle.svg",
                    lightPointer: true,
                });
            }

            function initAutocomplete()
            {
                autocomplete = new google.maps.places.Autocomplete(
                    document.getElementById('autocomplete'),
                    {
                        types: ['geocode']
                    }
                );
                autocomplete.setFields(['formatted_address', 'geometry']);
                autocomplete.addListener('place_changed', function()
                {
                    var place = autocomplete.getPlace();
                    document.getElementById("#via-address").value = place.formatted_address;
                    var position = {
                        lat: place.geometry.location.lat(),
                        lng: place.geometry.location.lng(),
                    };
                    addViaLocation(position.lat, position.lng);
                    if (newRoute)
                    {
                        destroyRoute(newRoute);
                    }
                    newRoute = route(pickup.position, position, colorList[1], function(distance, bounds)
                    {
                        document.getElementById("via-distance").value = distance.value;
                        boundList.toVia = bounds;
                        setBounds();
                    });
                });
            }
            // Bias the autocomplete object to the user's geographical location,
            // as supplied by the browser's 'navigator.geolocation' object.
            function geolocate()
            {
                if (navigator.geolocation)
                {
                    navigator.geolocation.getCurrentPosition(function(position)
                    {
                        var geolocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        var circle = new google.maps.Circle(
                        {
                            center: geolocation,
                            radius: position.coords.accuracy
                        });
                        autocomplete.setBounds(circle.getBounds());
                    });
                }
            }
            $(window).on('scroll', function()
            {
                if ($(window).scrollTop() >= 150)
                {
                    $('.header').fadeOut(150);
                }
                else
                {
                    $('.header').fadeIn(150);
                }
            });

        </script>
        <!-- custom script-->
        <script src="./js/globals.js"></script>
    </body>
</html>
